# üéØ –£–°–õ–û–í–ù–ê–Ø –ó–ê–©–ò–¢–ê DCA - –£–ª—É—á—à–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º

## üìÖ –î–∞—Ç–∞: 2026-01-26

---

## ‚ùì –í–û–ü–†–û–° –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø:

> "–ü—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ —Ü–µ–Ω—ã –Ω–∞ –∫–∞–∂–¥—ã–π 1% –ø—Ä–æ—Å–∞–¥–∫–∏ DCA –æ—Ç–æ–¥–≤–∏–≥–∞–µ—Ç—Å—è –Ω–∞ +15-25% –¥–∞–ª—å—à–µ -
> —ç—Ç–æ –ø—Ä–∏ –∫–∞–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö? –ü—Ä–æ—Å—Ç–æ –Ω–∞ –∫–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç? –ó–∞—á–µ–º?"

**–û—Ç–≤–µ—Ç:** –í—ã –ü–†–ê–í–´! –ù–µ –Ω—É–∂–Ω–æ –æ—Ç–æ–¥–≤–∏–≥–∞—Ç—å –Ω–∞ –ö–ê–ñ–î–´–ô –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ—Å–∞–¥–∫–∏.

---

## üîç –ê–ù–ê–õ–ò–ó –¢–ï–ö–£–©–ï–ô –ó–ê–©–ò–¢–´:

### –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```python
# 1. ATR –º–Ω–æ–∂–∏—Ç–µ–ª—å (–≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å)
atr_factor = current_volatility / BASE_ATR  # 0.8x - 2.5x

# 2. RSI –º–Ω–æ–∂–∏—Ç–µ–ª—å (—ç–∫—Å—Ç—Ä–µ–º—É–º—ã)
if RSI < 30: rsi_factor = 1.3  # –ü–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–æ
elif RSI < 40: rsi_factor = 1.1

# 3. Geo –º–Ω–æ–∂–∏—Ç–µ–ª—å (–≥–ª—É–±–∏–Ω–∞ DCA)
geo_factor = 1.1 ** safety_count

# –ò—Ç–æ–≥–æ:
actual_dist = base_dist * atr_factor * rsi_factor * geo_factor
```

### –ü—Ä–æ–±–ª–µ–º–∞ —ç—Ç–æ–π —Å–∏—Å—Ç–µ–º—ã:

**–ú–Ω–æ–∂–∏—Ç–µ–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ú–ì–ù–û–í–ï–ù–ù–û –Ω–∞ —Ç–µ–∫—É—â—É—é —Å–≤–µ—á—É:**

| –í—Ä–µ–º—è | –¶–µ–Ω–∞ | –ü—Ä–æ—Å–∞–¥–∫–∞ | ATR | RSI | –ú–Ω–æ–∂–∏—Ç–µ–ª—å | DCA |
|-------|------|----------|-----|-----|-----------|-----|
| 00:00 | 90,000 | 0% | 0.0040 | 50 | 2.0 | 89,460$ |
| 00:05 | 88,000 | -2.2% | 0.0025 | 28 | 1.6 | **89,280$** |
| 00:10 | 88,500 | -1.7% | 0.0020 | 42 | 1.0 | **89,496$** |

**–í–∏–¥–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É?**
- –ü–æ—Å–ª–µ –ø–∞–¥–µ–Ω–∏—è ATR —É–ø–∞–ª (—Ä—ã–Ω–æ–∫ "—É—Å—Ç–∞–ª")
- RSI –≤—ã—à–µ–ª –∏–∑ –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–æ (–∫–æ—Ä—Ä–µ–∫—Ü–∏—è)
- DCA –í–ï–†–ù–£–õ–°–Ø –ë–õ–ò–ñ–ï —Ö–æ—Ç—è –≤—Å—ë –µ—â—ë –ø—Ä–æ—Å–∞–¥–∫–∞ -1.7%!

---

## üí° –†–ï–®–ï–ù–ò–ï: –£—Å–ª–æ–≤–Ω–∞—è –∑–∞—â–∏—Ç–∞ —Å "–ø–∞–º—è—Ç—å—é"

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è:

**–ó–∞—â–∏—Ç–∞ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –ù–ï –ø—Ä–∏ –ª—é–±–æ–π –ø—Ä–æ—Å–∞–¥–∫–µ, –∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –û–ü–ê–°–ù–û–ô:**

1. üö® **–ë—ã—Å—Ç—Ä–æ–µ –ø–∞–¥–µ–Ω–∏–µ** (–±–æ–ª—å—à–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞ –∑–∞ –∫–æ—Ä–æ—Ç–∫–æ–µ –≤—Ä–µ–º—è)
2. üîª **–ù–æ–≤—ã–µ —ç–∫—Å—Ç—Ä–µ–º—É–º—ã** (–¥–µ–ª–∞—é—Ç—Å—è lower lows / higher highs)
3. ‚ö° **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏** (ATR –Ω–µ –ø–∞–¥–∞–µ—Ç –ø–æ—Å–ª–µ –ø—Ä–æ—Å–∞–¥–∫–∏)
4. üìâ **–°–µ—Ä–∏—è –∫—Ä–∞—Å–Ω—ã—Ö —Å–≤–µ—á–µ–π** (–ø—Ä–æ–¥–æ–ª–∂–∞—é—â–µ–µ—Å—è –ø–∞–¥–µ–Ω–∏–µ)

---

## üßÆ –§–û–†–ú–£–õ–ê –û–ü–ê–°–ù–û–°–¢–ò:

```python
def calculate_danger_level(self):
    """–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (0.0 - 1.0)"""
    danger_signals = []

    # 1. –°–∫–æ—Ä–æ—Å—Ç—å –ø–∞–¥–µ–Ω–∏—è (–∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –º–∏–Ω—É—Ç)
    if len(price_history) >= 5:
        price_5min_ago = price_history[-5]
        speed_drop = (price_5min_ago - current_price) / price_5min_ago
        if speed_drop > 0.01:  # –ü–∞–¥–µ–Ω–∏–µ >1% –∑–∞ 5 –º–∏–Ω—É—Ç
            danger_signals.append(min(speed_drop / 0.01, 1.0))  # 0.0 - 1.0

    # 2. –ù–æ–≤—ã–µ —ç–∫—Å—Ç—Ä–µ–º—É–º—ã (–∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–≤–µ—á–µ–π)
    if position_side == "Buy":
        recent_low = df['low'].tail(10).min()
        if current_price < recent_low:
            danger_signals.append(1.0)  # –ù–æ–≤—ã–π –º–∏–Ω–∏–º—É–º!
    else:
        recent_high = df['high'].tail(10).max()
        if current_price > recent_high:
            danger_signals.append(1.0)  # –ù–æ–≤—ã–π –º–∞–∫—Å–∏–º—É–º!

    # 3. –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –ù–ï –ø–∞–¥–∞–µ—Ç (—Ä–∏—Å–∫ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è)
    if len(atr_history) >= 3:
        avg_atr_3candles = mean(atr_history[-3:])
        if current_atr > avg_atr_3candles * 0.8:  # ATR –≤—ã—à–µ 80% —Å—Ä–µ–¥–Ω–µ–≥–æ
            danger_signals.append(0.5)

    # 4. –°–µ—Ä–∏—è –æ–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–≤–µ—á–µ–π
    if position_side == "Buy":
        red_candles = sum(1 for i in range(-5, 0) if df['close'].iloc[i] < df['open'].iloc[i])
        if red_candles >= 3:  # 3+ –∫—Ä–∞—Å–Ω—ã—Ö —Å–≤–µ—á–∏ –∏–∑ 5
            danger_signals.append(red_candles / 5.0)  # 0.6 - 1.0
    else:
        green_candles = sum(1 for i in range(-5, 0) if df['close'].iloc[i] > df['open'].iloc[i])
        if green_candles >= 3:
            danger_signals.append(green_candles / 5.0)

    # –ò—Ç–æ–≥–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (—Å—Ä–µ–¥–Ω–µ–µ –ø–æ —Å–∏–≥–Ω–∞–ª–∞–º)
    return sum(danger_signals) / max(len(danger_signals), 1) if danger_signals else 0.0
```

---

## üõ°Ô∏è –ê–ö–¢–ò–í–ê–¶–ò–Ø –ó–ê–©–ò–¢–´:

```python
def update_protection_multiplier(self):
    """–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞—â–∏—Ç—ã –¢–û–õ–¨–ö–û –ø—Ä–∏ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏"""

    # –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –æ–ø–∞—Å–Ω–æ—Å—Ç—å
    danger_level = self.calculate_danger_level()  # 0.0 - 1.0

    # –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –ø—Ä–æ—Å–∞–¥–∫—É
    side_mult = 1 if self.position_side == "Buy" else -1
    unrealized_pct = ((self.last_price - self.avg_price) / self.avg_price) * side_mult * 100

    if unrealized_pct < 0:  # –ü—Ä–æ—Å–∞–¥–∫–∞
        current_drawdown = abs(unrealized_pct)

        # ‚ö†Ô∏è –ö–õ–Æ–ß–ï–í–û–ï –û–¢–õ–ò–ß–ò–ï: –ó–∞—â–∏—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –û–ü–ê–°–ù–û–°–¢–ò, –Ω–µ –ø—Ä–æ—Å—Ç–æ –æ—Ç –ø—Ä–æ—Å–∞–¥–∫–∏!
        if danger_level > 0.3:  # –ü–æ—Ä–æ–≥ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ 30%

            # –í–∑–≤–µ—à–µ–Ω–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞ (—á–µ–º –æ–ø–∞—Å–Ω–µ–µ, —Ç–µ–º —Å–∏–ª—å–Ω–µ–µ —Ä–µ–∞–∫—Ü–∏—è)
            weighted_drawdown = current_drawdown * danger_level

            # –û–±–Ω–æ–≤–ª—è–µ–º –º–∞–∫—Å–∏–º—É–º
            if weighted_drawdown > self.max_weighted_drawdown:
                self.max_weighted_drawdown = weighted_drawdown
                self.last_danger_increase_time = datetime.now()

                # –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –∑–∞—â–∏—Ç—É
                PROTECTION_AGGRESSION = 20  # –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–µ–µ —á–µ–º —Ä–∞–Ω—å—à–µ
                new_multiplier = 1.0 + (weighted_drawdown * PROTECTION_AGGRESSION)

                if new_multiplier > self.protection_multiplier:
                    self.protection_multiplier = new_multiplier
                    self.log(f"üõ°Ô∏è Protection UP: {self.protection_multiplier:.2f}x (DD: {current_drawdown:.1f}%, danger: {danger_level*100:.0f}%)", Col.YELLOW)

    # –í–æ–∑–≤—Ä–∞—Ç - –∫–∞–∫ —Ä–∞–Ω—å—à–µ (—Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
    elif self.protection_multiplier > 1.0:
        safety_checks = self.check_safety_for_dca_return()
        if safety_checks['is_safe']:
            # –ú–µ–¥–ª–µ–Ω–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ
            self.protection_multiplier = max(1.0, self.protection_multiplier - 0.005)
```

---

## üìä –ü–†–ò–ú–ï–†–´:

### –ü—Ä–∏–º–µ—Ä 1: –û–±—ã—á–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞ (–ë–ï–ó –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∑–∞—â–∏—Ç—ã)

```
00:00 | –í—Ö–æ–¥ @ 90,000$
00:05 | –°–ø–æ–∫–æ–π–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ –¥–æ 89,100$ (-1.0%)
      | danger_level = 0.1 (–Ω–∏–∑–∫–∞—è –æ–ø–∞—Å–Ω–æ—Å—Ç—å)
      | ‚ùå –ü–æ—Ä–æ–≥ 0.3 –Ω–µ –ø—Ä–æ–π–¥–µ–Ω
      | protection_multiplier = 1.0 (–ù–ï –ê–ö–¢–ò–í–ò–†–û–í–ê–ù–ê)
      | DCA —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–±—ã—á–Ω–æ (ATR + RSI –º–Ω–æ–∂–∏—Ç–µ–ª–∏)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ –Ω—É–∂–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ - —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ ATR/RSI

---

### –ü—Ä–∏–º–µ—Ä 2: –û–ü–ê–°–ù–ê–Ø –ø—Ä–æ—Å–∞–¥–∫–∞ (–∞–∫—Ç–∏–≤–∞—Ü–∏—è –∑–∞—â–∏—Ç—ã)

```
00:00 | –í—Ö–æ–¥ @ 90,000$
00:03 | –†–ï–ó–ö–û–ï –ø–∞–¥–µ–Ω–∏–µ –¥–æ 88,500$ (-1.7% –∑–∞ 3 –º–∏–Ω—É—Ç—ã!)
      | –°–∏–≥–Ω–∞–ª—ã –æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
      |   ‚Ä¢ –°–∫–æ—Ä–æ—Å—Ç—å: 1.7% –∑–∞ 3 –º–∏–Ω ‚Üí signal = 1.0
      |   ‚Ä¢ –ù–æ–≤—ã–π –º–∏–Ω–∏–º—É–º –∑–∞ 10 —Å–≤–µ—á–µ–π ‚Üí signal = 1.0
      |   ‚Ä¢ 4 –∫—Ä–∞—Å–Ω—ã—Ö —Å–≤–µ—á–∏ –∏–∑ 5 ‚Üí signal = 0.8
      |   ‚Ä¢ ATR –æ—Å—Ç–∞–ª—Å—è –≤—ã—Å–æ–∫–∏–º ‚Üí signal = 0.5
      | danger_level = (1.0 + 1.0 + 0.8 + 0.5) / 4 = 0.825 ‚ö†Ô∏è
      | ‚úÖ –ü–æ—Ä–æ–≥ 0.3 –ø—Ä–æ–π–¥–µ–Ω!
      | weighted_drawdown = 1.7% * 0.825 = 1.4%
      | protection_multiplier = 1.0 + (1.4 * 20) = 1.28
      | üõ°Ô∏è –ó–ê–©–ò–¢–ê –ê–ö–¢–ò–í–ò–†–û–í–ê–ù–ê!
00:10 | –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –ø–∞–¥–µ–Ω–∏—è –¥–æ 87,000$ (-3.3%)
      | danger_level = 0.9 (–æ—á–µ–Ω—å –æ–ø–∞—Å–Ω–æ!)
      | weighted_drawdown = 3.3% * 0.9 = 3.0%
      | protection_multiplier = 1.60
      | üõ°Ô∏è –ó–ê–©–ò–¢–ê –£–°–ò–õ–ï–ù–ê!
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** DCA –æ—Ç–æ–¥–≤–∏–Ω—É–ª—Å—è –Ω–∞ 60% –¥–∞–ª—å—à–µ - –ü–†–ê–í–ò–õ–¨–ù–û!

---

### –ü—Ä–∏–º–µ—Ä 3: –õ–æ–∂–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞ (–ù–ï–¢ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏)

```
00:00 | –í—Ö–æ–¥ @ 90,000$
00:10 | –ú–µ–¥–ª–µ–Ω–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ –¥–æ 89,000$ (-1.1%)
      | –°–∏–≥–Ω–∞–ª—ã –æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
      |   ‚Ä¢ –°–∫–æ—Ä–æ—Å—Ç—å: 1.1% –∑–∞ 10 –º–∏–Ω ‚Üí signal = 0.0 (–º–µ–¥–ª–µ–Ω–Ω–æ)
      |   ‚Ä¢ –ú–∏–Ω–∏–º—É–º –ù–ï –æ–±–Ω–æ–≤–ª—ë–Ω ‚Üí signal = 0.0
      |   ‚Ä¢ 2 –∫—Ä–∞—Å–Ω—ã—Ö, 3 –∑–µ–ª—ë–Ω—ã—Ö ‚Üí signal = 0.0
      |   ‚Ä¢ ATR —É–ø–∞–ª ‚Üí signal = 0.0
      | danger_level = 0.0
      | ‚ùå –ü–æ—Ä–æ–≥ –Ω–µ –ø—Ä–æ–π–¥–µ–Ω
      | protection_multiplier = 1.0
00:15 | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ 89,500$
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –≠—Ç–æ –±—ã–ª–∞ –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è - –∑–∞—â–∏—Ç–∞ –ù–ï –Ω—É–∂–Ω–∞

---

## ‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò:

```python
# –í config.py –¥–æ–±–∞–≤–∏—Ç—å:

# üõ°Ô∏è –£–°–õ–û–í–ù–ê–Ø –ó–ê–©–ò–¢–ê DCA
PROTECTION_DANGER_THRESHOLD = 0.3   # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ (30%)
PROTECTION_AGGRESSION = 20          # –ú–Ω–æ–∂–∏—Ç–µ–ª—å –ø—Ä–∏ –û–ü–ê–°–ù–û–ô –ø—Ä–æ—Å–∞–¥–∫–µ
PROTECTION_DECAY_RATE = 0.005       # –°–∫–æ—Ä–æ—Å—Ç—å –≤–æ–∑–≤—Ä–∞—Ç–∞ (0.5% –∑–∞ —Ü–∏–∫–ª)

# –ü–æ—Ä–æ–≥–∏ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
PROTECTION_SPEED_DROP_THRESHOLD = 0.01   # 1% –∑–∞ 5 –º–∏–Ω—É—Ç = –æ–ø–∞—Å–Ω–æ
PROTECTION_CANDLES_LOOKBACK = 10         # –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç–∫—Å—Ç—Ä–µ–º—É–º–æ–≤ –∑–∞ 10 —Å–≤–µ—á–µ–π
PROTECTION_DIRECTIONAL_CANDLES = 3       # 3+ —Å–≤–µ—á–∏ –≤ –æ–¥–Ω—É —Å—Ç–æ—Ä–æ–Ω—É = –æ–ø–∞—Å–Ω–æ
PROTECTION_ATR_STABLE_RATIO = 0.8        # ATR >80% —Å—Ä–µ–¥–Ω–µ–≥–æ = –æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è
```

---

## ‚úÖ –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê:

### –ü–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å "–∑–∞—â–∏—Ç–æ–π –Ω–∞ –∫–∞–∂–¥—ã–π %":

| –°–∏—Ç—É–∞—Ü–∏—è | –°—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞ | –£—Å–ª–æ–≤–Ω–∞—è –∑–∞—â–∏—Ç–∞ |
|----------|----------------|-----------------|
| –ú–µ–¥–ª–µ–Ω–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ -1% | +15% –∫ DCA | 0% (–ù–ï –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è) |
| –†–µ–∑–∫–æ–µ –ø–∞–¥–µ–Ω–∏–µ -1% –∑–∞ 2 –º–∏–Ω | +15% –∫ DCA | +25% –∫ DCA ‚ö° |
| –û–±—ã—á–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è -1.5% | +22% –∫ DCA | 0% (–ù–ï –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è) |
| –ü—Ä–æ–±–æ–π –Ω–æ–≤–æ–≥–æ –º–∏–Ω–∏–º—É–º–∞ -2% | +30% –∫ DCA | +40% –∫ DCA ‚ö° |
| –°–ø–æ–∫–æ–π–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞ -3% | +45% –∫ DCA | +10% (–Ω–∏–∑–∫–∞—è –æ–ø–∞—Å–Ω–æ—Å—Ç—å) |

**–ò—Ç–æ–≥:** –ó–∞—â–∏—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –£–ú–ù–ï–ï - –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –î–ï–ô–°–¢–í–ò–¢–ï–õ–¨–ù–û –Ω—É–∂–Ω–∞!

---

## üéØ –õ–û–ì–ò–ö–ê –†–ê–ë–û–¢–´:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ï—Å—Ç—å –ø—Ä–æ—Å–∞–¥–∫–∞? ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ –î–ê
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å danger_level‚îÇ
‚îÇ (—Å–∫–æ—Ä–æ—Å—Ç—å, —ç–∫—Å—Ç—Ä–µ–º—É–º—ã, ‚îÇ
‚îÇ  –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å, —Å–≤–µ—á–∏) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
    danger > 0.3?
         ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ –ù–ï–¢     ‚îÇ –î–ê
    ‚ñº         ‚ñº
  –ù–∏—á–µ–≥–æ   –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
  –Ω–µ –¥–µ–ª–∞—Ç—å –∑–∞—â–∏—Ç—É!
  (ATR/RSI  protection_multiplier
   —Ä–∞–±–æ—Ç–∞—é—Ç   —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è
   –∫–∞–∫ –æ–±—ã—á–Ω–æ)
```

---

## üîÑ –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–¨ –° –¢–ï–ö–£–©–ï–ô –°–ò–°–¢–ï–ú–û–ô:

```python
# –ò—Ç–æ–≥–æ–≤–∞—è —Ñ–æ—Ä–º—É–ª–∞ –æ—Å—Ç–∞—ë—Ç—Å—è —Ç–æ–π –∂–µ:
actual_dist = base_dist * atr_factor * rsi_factor * geo_factor * protection_multiplier

# –ù–û:
# - atr_factor, rsi_factor, geo_factor - —Ä–∞–±–æ—Ç–∞—é—Ç –í–°–ï–ì–î–ê (–∫–∞–∫ —Å–µ–π—á–∞—Å)
# - protection_multiplier - —Ä–∞–±–æ—Ç–∞–µ—Ç –¢–û–õ–¨–ö–û –ø—Ä–∏ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–ù–û–í–û–ï!)
```

**–í–∞–∂–Ω–æ:** –í—Å–µ –≤–∞—à–∏ —Ç–µ–∫—É—â–∏–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!

---

## üìà –°–†–ê–í–ù–ï–ù–ò–ï –ü–û–î–•–û–î–û–í:

### –ü–æ–¥—Ö–æ–¥ 1: "–ù–∞ –∫–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç" (–û–¢–ö–õ–û–ù–Å–ù)
- ‚ùå –ò–∑–ª–∏—à–Ω—è—è –∑–∞—â–∏—Ç–∞ –ø—Ä–∏ —Å–ø–æ–∫–æ–π–Ω—ã—Ö –ø—Ä–æ—Å–∞–¥–∫–∞—Ö
- ‚ùå DCA —á–∞—Å—Ç–æ —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ
- ‚ùå –£–ø—É—â–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —É—Å—Ä–µ–¥–Ω–µ–Ω–∏—è

### –ü–æ–¥—Ö–æ–¥ 2: "–£—Å–ª–æ–≤–Ω–∞—è –∑–∞—â–∏—Ç–∞" (–†–ï–ö–û–ú–ï–ù–î–£–Æ)
- ‚úÖ –ó–∞—â–∏—Ç–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –†–ï–ê–õ–¨–ù–û–ô –æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ –ù–µ –º–µ—à–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º—É —É—Å—Ä–µ–¥–Ω–µ–Ω–∏—é
- ‚úÖ –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –∑–∞—â–∏—Ç–∞ –ø—Ä–∏ —Ä–µ–∑–∫–∏—Ö –¥–≤–∏–∂–µ–Ω–∏—è—Ö
- ‚úÖ –£—á–∏—Ç—ã–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ñ–∞–∫—Ç–æ—Ä–æ–≤

---

## üß™ –ö–û–î –ò–ó–ú–ï–ù–ï–ù–ò–ô:

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–∏—Ç—å `calculate_danger_level()` (~40 —Å—Ç—Ä–æ–∫)
- –ò–∑–º–µ–Ω–∏—Ç—å `update_protection_multiplier()` (~15 —Å—Ç—Ä–æ–∫)
- –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `__init__` (~5 —Å—Ç—Ä–æ–∫)
- –û—Å—Ç–∞–≤–∏—Ç—å `check_safety_for_dca_return()` –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ò—Ç–æ–≥–æ:** ~60 —Å—Ç—Ä–æ–∫ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞

---

## ‚úÖ –ò–¢–û–ì:

**–û—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å "–ó–∞—á–µ–º –æ—Ç–æ–¥–≤–∏–≥–∞—Ç—å –Ω–∞ –∫–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç?":**

–ù–ï –ù–£–ñ–ù–û! –û—Ç–æ–¥–≤–∏–≥–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ **–û–ü–ê–°–ù–û–ô** –ø—Ä–æ—Å–∞–¥–∫–µ:
- ‚ö° –ë—ã—Å—Ç—Ä–æ–µ –ø–∞–¥–µ–Ω–∏–µ (>1% –∑–∞ 5 –º–∏–Ω—É—Ç)
- üîª –ù–æ–≤—ã–µ –º–∏–Ω–∏–º—É–º—ã/–º–∞–∫—Å–∏–º—É–º—ã
- üìâ –°–µ—Ä–∏—è –æ–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–≤–µ—á–µ–π
- ‚ö†Ô∏è –í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

**–ü—Ä–∏ –æ–±—ã—á–Ω–æ–π —Å–ø–æ–∫–æ–π–Ω–æ–π –ø—Ä–æ—Å–∞–¥–∫–µ** - —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ ATR –∏ RSI –º–Ω–æ–∂–∏—Ç–µ–ª–∏ (–∫–∞–∫ —Å–µ–π—á–∞—Å).

**–ü—Ä–∏ –û–ü–ê–°–ù–û–ô –ø—Ä–æ—Å–∞–¥–∫–µ** - –≤–∫–ª—é—á–∞–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ (protection_multiplier).

---

**–ê–≤—Ç–æ—Ä:** Claude Code AI
**–í–µ—Ä—Å–∏—è:** Conditional Protection v2.0
**–°—Ç–∞—Ç—É—Å:** üìã –ì–û–¢–û–í–û –ö –û–ë–°–£–ñ–î–ï–ù–ò–Æ

---

## üí¨ –í–û–ü–†–û–° –ö –í–ê–ú:

–ö–∞–∫–æ–π –ø–æ—Ä–æ–≥ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤–∞–º –Ω—Ä–∞–≤–∏—Ç—Å—è?

1. **–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π** (0.2) - –∑–∞—â–∏—Ç–∞ –≤–∫–ª—é—á–∞–µ—Ç—Å—è —á–∞—â–µ
2. **–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π** (0.3) - –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
3. **–ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π** (0.4) - –∑–∞—â–∏—Ç–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—á–µ–Ω—å –æ–ø–∞—Å–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö
