"""
ðŸ¤– CONSTANTS MODULE
ÐšÐ¾Ð½ÑÑ‚Ð°Ð½Ñ‚Ñ‹ Ð¸ Ð¿ÐµÑ€ÐµÑ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ Ð´Ð»Ñ Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ð¾Ð³Ð¾ Ð±Ð¾Ñ‚Ð°

Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚:
- Ð¢Ð¸Ð¿Ñ‹ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ Ð´Ð»Ñ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
- Ð¡Ð¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹
- Ð¢Ð¸Ð¿Ñ‹ Ð¾Ñ€Ð´ÐµÑ€Ð¾Ð²
"""

from enum import Enum


# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Ð¡ÐžÐ‘Ð«Ð¢Ð˜Ð¯ Ð”Ð›Ð¯ BLACK BOX Ð›ÐžÐ“Ð˜Ð ÐžÐ’ÐÐÐ˜Ð¯
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

class EventType:
    """Ð¢Ð¸Ð¿Ñ‹ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ Ð´Ð»Ñ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ"""
    # ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ð¸
    ENTRY = "ENTRY"
    EXIT = "EXIT"
    POSITION_UPDATE = "POSITION_UPDATE"
    
    # ÐžÑ€Ð´ÐµÑ€Ð°
    TP_PLACED = "TP_PLACED"
    TP_UPDATE = "TP_UPDATE"
    TP_HIT = "TP_HIT"
    DCA_PLACED = "DCA_PLACED"
    DCA_UPDATE = "DCA_UPDATE"
    DCA_HIT = "DCA_HIT"
    SL_PLACED = "SL_PLACED"
    SL_HIT = "SL_HIT"
    
    # Ð¢Ñ€ÐµÐ¹Ð»Ð¸Ð½Ð³
    TRAILING_ACTIVATED = "TRAILING_ACTIVATED"
    TRAILING_UPDATE = "TRAILING_UPDATE"
    RANGE_TRAILING_ACTIVATED = "RANGE_TRAILING_ACTIVATED"
    RANGE_TRAILING_UPDATE = "RANGE_TRAILING_UPDATE"
    
    # ÐÐ½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ°
    PNL_AUDIT_MISMATCH = "PNL_AUDIT_MISMATCH"
    FUTURE_SPY = "FUTURE_SPY"
    HEALTH_CHECK = "HEALTH_CHECK"
    
    # ÐžÑˆÐ¸Ð±ÐºÐ¸
    ERROR = "ERROR"
    WARNING = "WARNING"
    CRITICAL = "CRITICAL"


# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Ð¡ÐžÐ¡Ð¢ÐžÐ¯ÐÐ˜Ð¯ ÐŸÐžÐ—Ð˜Ð¦Ð˜Ð™
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

class PositionSide:
    """ÐÐ°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸"""
    BUY = "Buy"   # LONG Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ
    SELL = "Sell"  # SHORT Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ
    
    @staticmethod
    def from_string(side_str):
        """ÐŸÑ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð² Ñ‚Ð¸Ð¿ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸"""
        if side_str.lower() in ['buy', 'long']:
            return PositionSide.BUY
        elif side_str.lower() in ['sell', 'short']:
            return PositionSide.SELL
        else:
            raise ValueError(f"Unknown position side: {side_str}")


# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Ð¢Ð˜ÐŸÐ« ÐžÐ Ð”Ð•Ð ÐžÐ’
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

class OrderType:
    """Ð¢Ð¸Ð¿Ñ‹ Ð¾Ñ€Ð´ÐµÑ€Ð¾Ð²"""
    MARKET = "market"
    LIMIT = "limit"
    STOP_MARKET = "stop_market"
    STOP_LIMIT = "stop_limit"
    TAKE_PROFIT = "take_profit"
    TAKE_PROFIT_LIMIT = "take_profit_limit"


# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Ð Ð•Ð–Ð˜ÐœÐ« Ð Ð«ÐÐšÐ
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

class MarketMode:
    """Ð ÐµÐ¶Ð¸Ð¼Ñ‹ Ñ€Ñ‹Ð½ÐºÐ°"""
    TRENDING = "TRENDING"  # Ð¢Ñ€ÐµÐ½Ð´Ð¾Ð²Ñ‹Ð¹ Ñ€Ñ‹Ð½Ð¾Ðº
    RANGE = "RANGE"        # Ð‘Ð¾ÐºÐ¾Ð²Ð¸Ðº


# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Ð¡Ð¢ÐÐ”Ð˜Ð˜ Ð’Ð¥ÐžÐ”Ð
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

class EntryStage:
    """Ð¡Ñ‚Ð°Ð´Ð¸Ð¸ Ð²Ñ…Ð¾Ð´Ð° Ð² Ð¿Ð¾Ð·Ð¸Ñ†Ð¸ÑŽ"""
    STAGE_1 = 1  # ÐÐ¸Ð·ÐºÐ°Ñ ÑƒÐ²ÐµÑ€ÐµÐ½Ð½Ð¾ÑÑ‚ÑŒ
    STAGE_2 = 2  # Ð¡Ñ€ÐµÐ´Ð½ÑÑ ÑƒÐ²ÐµÑ€ÐµÐ½Ð½Ð¾ÑÑ‚ÑŒ
    STAGE_3 = 3  # Ð’Ñ‹ÑÐ¾ÐºÐ°Ñ ÑƒÐ²ÐµÑ€ÐµÐ½Ð½Ð¾ÑÑ‚ÑŒ


# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# ÐŸÐžÐ ÐžÐ“Ð˜ Ð˜ Ð›Ð˜ÐœÐ˜Ð¢Ð«
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

class Thresholds:
    """ÐŸÐ¾Ñ€Ð¾Ð³Ð¾Ð²Ñ‹Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ"""
    # PnL Audit
    PNL_AUDIT_PCT = 25.0      # Ð”Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð¼Ð°Ñ Ñ€Ð°Ð·Ð½Ð¸Ñ†Ð° Ð² Ð¿Ñ€Ð¾Ñ†ÐµÐ½Ñ‚Ð°Ñ…
    PNL_AUDIT_ABS = 1.0       # Ð”Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð¼Ð°Ñ Ð°Ð±ÑÐ¾Ð»ÑŽÑ‚Ð½Ð°Ñ Ñ€Ð°Ð·Ð½Ð¸Ñ†Ð° Ð² USD
    
    # Danger Level
    DANGER_LOW = 30           # ÐÐ¸Ð·ÐºÐ¸Ð¹ ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸
    DANGER_MEDIUM = 60        # Ð¡Ñ€ÐµÐ´Ð½Ð¸Ð¹ ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸
    DANGER_HIGH = 80          # Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹ ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸
    
    # Volatility
    VOLATILITY_LOW = 0.5      # ÐÐ¸Ð·ÐºÐ°Ñ Ð²Ð¾Ð»Ð°Ñ‚Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ %
    VOLATILITY_MEDIUM = 1.5   # Ð¡Ñ€ÐµÐ´Ð½ÑÑ Ð²Ð¾Ð»Ð°Ñ‚Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ %
    VOLATILITY_HIGH = 3.0     # Ð’Ñ‹ÑÐ¾ÐºÐ°Ñ Ð²Ð¾Ð»Ð°Ñ‚Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ %
    
    # Position Limits
    MAX_DCA_COUNT = 5         # ÐœÐ°ÐºÑÐ¸Ð¼ÑƒÐ¼ DCA
    MAX_CLOSE_ATTEMPTS = 3    # ÐœÐ°ÐºÑÐ¸Ð¼ÑƒÐ¼ Ð¿Ð¾Ð¿Ñ‹Ñ‚Ð¾Ðº Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ñ


# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# EMOJI ÐšÐžÐÐ¡Ð¢ÐÐÐ¢Ð«
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

class Emoji:
    """Emoji Ð´Ð»Ñ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹"""
    # ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ð¸
    ENTRY = "ðŸŸ¢"
    EXIT = "ðŸ”´"
    PROFIT = "ðŸ’°"
    LOSS = "ðŸ’”"
    
    # ÐÐ°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ
    LONG = "ðŸ“ˆ"
    SHORT = "ðŸ“‰"
    
    # ÐžÑ€Ð´ÐµÑ€Ð°
    TP = "ðŸŽ¯"
    DCA = "ðŸ”„"
    SL = "ðŸ›¡ï¸"
    
    # Ð¡Ñ‚Ð°Ñ‚ÑƒÑ
    SUCCESS = "âœ…"
    WARNING = "âš ï¸"
    ERROR = "âŒ"
    INFO = "â„¹ï¸"
    
    # Ð Ñ‹Ð½Ð¾Ðº
    TRENDING = "ðŸš€"
    RANGE = "â†”ï¸"
    VOLATILE = "âš¡"
    
    # ÐŸÑ€Ð¾Ñ‡ÐµÐµ
    ROBOT = "ðŸ¤–"
    CHART = "ðŸ“Š"
    MONEY = "ðŸ’µ"
    FIRE = "ðŸ”¥"


# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Ð’Ð¡ÐŸÐžÐœÐžÐ“ÐÐ¢Ð•Ð›Ð¬ÐÐ«Ð• Ð¤Ð£ÐÐšÐ¦Ð˜Ð˜
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

def get_position_emoji(side):
    """ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ emoji Ð´Ð»Ñ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸"""
    if side == PositionSide.BUY:
        return Emoji.LONG
    elif side == PositionSide.SELL:
        return Emoji.SHORT
    return ""


def get_pnl_emoji(pnl):
    """ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ emoji Ð´Ð»Ñ PnL"""
    if pnl > 0:
        return Emoji.PROFIT
    elif pnl < 0:
        return Emoji.LOSS
    return Emoji.INFO


def get_danger_emoji(danger_level):
    """ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ emoji Ð´Ð»Ñ ÑƒÑ€Ð¾Ð²Ð½Ñ Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸"""
    if danger_level >= Thresholds.DANGER_HIGH:
        return Emoji.FIRE
    elif danger_level >= Thresholds.DANGER_MEDIUM:
        return Emoji.WARNING
    return Emoji.SUCCESS
